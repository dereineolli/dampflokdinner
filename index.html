<!doctype html>
<html class="no-js" lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>Dampflokdinner Mission Control</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">

    <link rel="stylesheet" href="css/app.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

    <header>
        <div class="row column">
            <h1>Dampflokdinner Mission Control</h1>
        </div>
    </header>
    <main class="row pure-g">
        <div v-for="section in sections" class="columns pure-u-1-4" :class="section.name">
            <h3>
                <i class="material-icons">{{ section.icon }}</i> {{ section.text }}
            </h3>
            <ul :id="section.name">
                <li v-for="(train, index) in section.trains">
                    <div class="train" :class="train.name" v-on:click="moveTrain(train, section)">
                        <div class="desc">{{train.name}}</div>
                        <div class="rail">{{train.rail}}</div>
                    </div>
                </li>
            </ul>
        </div>
    </main>




    <script src="https://vuejs.org/js/vue.js"></script>
    <script src="config.js"></script>

    <script>
        var app = new Vue({
            el: 'main',
            data: settings,
            methods: {
                moveTrain: function(train, section) {

                    var oldIndex = this.sections.indexOf(section);
                    var newIndex = oldIndex + 1 >= this.sections.length ? 0 : oldIndex + 1;
                    var trainIndex = section.trains.indexOf(train);

                    console.log("moving train (" + train.name + ") from " + this.sections[oldIndex].name + " to " + this.sections[newIndex].name);
                    this.sections[oldIndex].trains.splice(trainIndex, 1);
                    this.sections[newIndex].trains.push(train);
                }
            }
        });
    </script>
</body>

</html>